{% load leaderboard_extras %}
{% load static %}
<head>
    <title>StravaLeaderboard</title><link rel="preconnect" href="{https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&display=swap" rel="stylesheet">
    <link rel="icon" 
      type="image/png" 
      href="{% static 'stravaleaderboard/images/SL.png' %}">
</head>
<link rel="stylesheet" type="text/css" href="{% static 'stravaleaderboard/style.css' %}">
{% if club_name_list %}
    
<table  id="titlebar">
    <tr class="tableElmt">
        <td class="tableElmt" style="width: 25%;"><img src="{% static 'stravaleaderboard/images/omega.png' %}" id="omegaLogo" class="logo"></td>
        <td class="tableElmt" style="width: 50%;">
            <table class="tableElmt" style="width: 100%; box-shadow: none;">
                <tr class="tableElmt">
                    <td class="tableElmt"><h1 id="title">#NordicSemiChallenge</h1></td>
                </tr >
                <tr>
                    <td class="tableElmt"><h2>Sct. Omega Broderskap & Nordic Semiconductor</h2></td>

                </tr>
            </table>
        </td>
        <td class="tableElmt" style="width:25%"><img src="{% static 'stravaleaderboard/images/nordic.png' %}" id="nordicLogo" class="logo"></td>
    </tr>
</table>
<hr style="color: rgba(rgba(179, 179, 179, 0.726)); width: 80%; margin-top: 15px;">

    <table style="margin-top: 20px; border-radius: 20px;" id="resulttable">
        <tr style="border-radius: 20px; background-color: #dfdfdf; width: 100%;" >
            <th style="width: 20%; text-align: center;">Club</th><!-- widths below need to add up to 60% -->
            <th class="distancemarker" style="width: 10%;">Trondheim</th>
            <th class="distancemarker" style="width: 10%; border-left: 2px dotted black;">Oslo</th>
            <th class="distancemarker" style="width: 10%; border-left: 2px dotted black;">...</th>
            <th class="distancemarker" style="width: 10%; border-left: 2px dotted black;">...</th>
            <th class="distancemarker" style="width: 10%; border-left: 2px dotted black;">...</th>
            <th class="distancemarker" style="width: 10%; border-left: 2px dotted black;">...</th>
            <th style="text-align: center;">Distance current week</th>
            <th style="text-align: center;">Total Distance</th>
            <th style="text-align: center;">Adjusted Distance</th>
<!--             <th></th> -->
        </tr>
    {% for club in club_name_list %}
        <tr> 
            <td style="background-color: white;">{{ club.name }}</td>
            <td id="progresso" style="background-color: white;" colspan="6">
                <progress max="29140" value="{{ club.total_distance }}"></progress>  
                <div id="test" ><span>{{ club.total_distance }}km of 29140km ({{ club.percentage }}%) </span></div>
<!--                 <span class="markerspan" style="display: inline-block; width: 16%; "></span>
                <span class="markerspan" style="display: inline-block; width: 16%; border-left: 2px dotted black;"></span>
                <span class="markerspan" style="display: inline-block; width: 16%; border-left: 2px dotted black;"></span>
                <span class="markerspan" style="display: inline-block; width: 16%; border-left: 2px dotted black;"></span>
                <span class="markerspan" style="display: inline-block; width: 16%; border-left: 2px dotted black;"></span>
                <span class="markerspan" style="display: inline-block; width: 16%; border-left: 2px dotted black;"></span> -->
            </td> <!-- Remember to update theese when adding more-->
            
            {% if current_week == 0 %}
                    <td style="background-color: white;">0</td>
                    <td style="background-color: white;">0 km</td>
            {% endif %}

            </td>

            {% for dist in club.distances_set.all %}
                {% if dist.week ==  current_week  %}
                    <td style="background-color: white;">{{ dist.distance }} km</td>
                {% endif %}
            {% endfor %}
            <td style="background-color: white;">{{ club.total_distance }} km</td>
            <td style="background-color: white;">{{ club.currentpoints }} km</td>
            <!--<td style="background-color: white;"><a href="/stravaleaderboard/{{ club.name }}/" class="hover"> Weekly overview </a></td> -->
        </tr>
    {% endfor %}
  
    <!-- <p style="text-align: center;">Some current issues with the leaderboard are now explained under <a href=" {% url 'about' %}" class="hover">Rules & information</a>.<br> The correct distances will be updated regularly</p>
     --><div class="box">
        <p class="botRight">Last Updated:  {{ deltaT }} minutes ago </p>
        <!-- <p class="botLeft"><a  href="{% url 'about' %}"class="hover"> Rules & information </a></p>     -->
    </div>
{% else %}
    <p>No clubs are available.</p>
{% endif %}